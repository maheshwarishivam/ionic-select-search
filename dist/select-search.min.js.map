{"version":3,"sources":["/src/select-search.js"],"names":["_template","join","angular","module","directive","restrict","require","template","scope","selectedValue","selectTitle","itemName","itemId","source","placeholderText","headerClass","selectChanged","placeholderTextClass","selectBoxClass","showSearch","controller","$scope","$element","$ionicModal","$parse","label","filterText","showSelectModal","val","sourceObjects","$parent","renderModal","modal","show","closeSelectModal","hide","$on","id","remove","$watch","newValue","oldValue","element","children","innerText","undefined","i","len","length","setPlaceholderLabel","searchFilter","fromTemplate","animation","backdropClickToClose","clickItem","item","compile","input","find","forEach","name","ng-model","value","isDefined","attr"],"mappings":"CAAA,WAEI,GAAIA,IACA,0EACA,mEACA,0CACA,yBACA,UACFC,KAAK,KAEPC,SAAQC,OAAO,uBACVC,UAAU,kBAAmB,WAE1B,OACIC,SAAU,IACVC,SAAU,WACVC,SAAUP,EACVQ,OACIC,cAAe,IACfC,YAAa,IACbC,SAAU,IACVC,OAAQ,IACRC,OAAQ,IACRC,gBAAiB,IACjBC,YAAa,IACbC,cAAe,IACfC,qBAAsB,IACtBC,eAAgB,IAChBC,WAAY,KAEhBC,YAAa,SAAU,WAAY,cAAe,SAAU,SAAUC,EAAQC,EAAUC,EAAaC,GAEjGH,EAAOP,gBAAmBO,EAAsB,gBAAIA,EAAOP,gBAAkB,GAC7EO,EAAOI,MAAQJ,EAAOP,gBACtBO,EAAOJ,qBAAwBI,EAA2B,qBAAIA,EAAOJ,qBAAuB,GAC5FI,EAAOH,eAAkBG,EAAqB,eAAIA,EAAOH,eAAiB,GAC1EG,EAAOF,WAAcE,EAAiB,WAAIA,EAAOF,WAAa,MAC9DE,EAAOK,WAAa,GAEpBL,EAAOM,gBAAkB,WACrB,GAAIC,GAAMJ,EAAOH,EAAOR,OACxBQ,GAAOQ,cAAgBD,EAAIP,EAAOS,SAClCT,EAAON,YAAeM,EAAkB,YAAIA,EAAON,YAAc,GACjEM,EAAOU,cACPV,EAAOW,MAAMC,QAGjBZ,EAAOa,iBAAmB,WAClBb,EAAOW,OACPX,EAAOW,MAAMG,OACjBd,EAAOK,WAAa,IAGxBL,EAAOe,IAAI,WAAY,SAAUC,GACzBhB,EAAOW,OACPX,EAAOW,MAAMM,SACjBjB,EAAOK,WAAa,KAGxBL,EAAOkB,OAAO,kBAAmB,SAAUC,EAAUC,GACjDvC,QAAQwC,QAAQpB,EAASqB,WAAW,IAAIA,WAAW,GAAGC,UAAYJ,IAGtEnB,EAAOkB,OAAO,gBAAiB,SAAUC,EAAUC,GAE/C,GAAII,QAAaL,EAAU,CACvB,GAAIZ,GAAMJ,EAAOH,EAAOR,OACxBQ,GAAOQ,cAAgBD,EAAIP,EAAOS,QAElC,KADA,GAAIgB,GAAI,EAAGC,EAAM1B,EAAOQ,cAAcmB,OAC/BF,EAAIC,EAAKD,IACRzB,EAAOQ,cAAciB,GAAGzB,EAAOT,SAAW4B,GAE1CnB,EAAO4B,oBAAoB5B,EAAOQ,cAAciB,GAAGzB,EAAOV,eAIlEU,GAAO4B,oBAAoB5B,EAAOP,mBAG1CO,EAAO6B,aAAe,SAAUxB,GAC5BL,EAAOK,WAAaA,GAGxBL,EAAOU,YAAc,WACjBV,EAAOW,MAAQT,EAAY4B,aAAa,sDACN9B,EAAON,YAAc,uBAC1BM,EAAOX,YAAc,+bAWiDW,EAAOV,SAAW,uCAAyCU,EAAOV,SAAW,+DAI5KH,MAAOa,EACP+B,UAAW,iBACXC,sBAAsB,KAI9BhC,EAAOiC,UAAY,SAAUC,GACzBlC,EAAOZ,cAAgB8C,EAAKlC,EAAOT,QACnCS,EAAOI,MAAQ8B,EAAKlC,EAAOV,UAC3BU,EAAOa,mBACPb,EAAOL,eAAeP,cAAeY,EAAOZ,iBAGhDY,EAAO4B,oBAAsB,SAAUxB,GACnCJ,EAAOI,MAAQA,GAGnBJ,EAAOe,IAAI,QAAS,WAChBf,EAAO4B,oBAAoB5B,EAAOP,iBAClCO,EAAOZ,cAAgB,SAG/B+C,QAAS,SAAUlC,EAAUD,GACzB,GAAIoC,GAAQnC,EAASoC,KAAK,iBAC1BxD,SAAQyD,SACJC,KAAQvC,EAAOuC,KACfC,WAAYxC,EAAOZ,eACpB,SAAUqD,EAAOF,GACZ1D,QAAQ6D,UAAUD,IAClBL,EAAMO,KAAKJ,EAAME","file":"select-search.min.js","sourcesContent":["(function () {\n\n    var _template = [\n        \"<div class='selectBox {{selectBoxClass}}' ng-click='showSelectModal()'>\",\n        \"<span class='selected {{placeholderTextClass}}'>{{label}}</span>\",\n        \"<span class='selectArrow'>&#9660</span>\",\n        \"<input type='hidden'/>\",\n        \"</div>\"\n    ].join(\"\\n\");\n\n    angular.module('$selectSearchBox', [])\n        .directive('selectSearchBox', function () {\n\n            return {\n                restrict: 'E',\n                require: ['ngModel'],\n                template: _template,\n                scope: {\n                    selectedValue: \"=\",\n                    selectTitle: \"@\",\n                    itemName: \"@\",\n                    itemId: \"@\",\n                    source: \"@\",\n                    placeholderText: \"@\",\n                    headerClass: \"@\",\n                    selectChanged: \"&\",\n                    placeholderTextClass: \"@\",\n                    selectBoxClass: \"@\",\n                    showSearch: \"@\"\n                },\n                controller: ['$scope', '$element', '$ionicModal', '$parse', function ($scope, $element, $ionicModal, $parse) {\n\n                    $scope.placeholderText = ($scope.placeholderText) ? $scope.placeholderText : '';\n                    $scope.label = $scope.placeholderText;\n                    $scope.placeholderTextClass = ($scope.placeholderTextClass) ? $scope.placeholderTextClass : '';\n                    $scope.selectBoxClass = ($scope.selectBoxClass) ? $scope.selectBoxClass : '';\n                    $scope.showSearch = ($scope.showSearch) ? $scope.showSearch : \"yes\";\n                    $scope.filterText = '';\n\n                    $scope.showSelectModal = function () {\n                        var val = $parse($scope.source);\n                        $scope.sourceObjects = val($scope.$parent);\n                        $scope.headerClass = ($scope.headerClass) ? $scope.headerClass : \"\";\n                        $scope.renderModal();\n                        $scope.modal.show();\n                    };\n\n                    $scope.closeSelectModal = function () {\n                        if ($scope.modal)\n                            $scope.modal.hide();\n                        $scope.filterText = '';\n                    };\n\n                    $scope.$on('$destroy', function (id) {\n                        if ($scope.modal)\n                            $scope.modal.remove();\n                        $scope.filterText = '';\n                    });\n\n                    $scope.$watch('placeholderText', function (newValue, oldValue) {\n                        angular.element($element.children()[0]).children()[0].innerText = newValue;\n                    });\n\n                    $scope.$watch('selectedValue', function (newValue, oldValue) {\n                        //console.log('selected value changed from ', oldValue, ' to ', newValue);\n                        if (undefined != newValue) {\n                            var val = $parse($scope.source);\n                            $scope.sourceObjects = val($scope.$parent);\n                            var i = 0, len = $scope.sourceObjects.length;\n                            for (; i < len; i++) {\n                                if ($scope.sourceObjects[i][$scope.itemId] == newValue) {\n                                    //console.log('found descr for ', newValue, ' = ',$scope.sourceObjects[i][$scope.itemName]);\n                                    $scope.setPlaceholderLabel($scope.sourceObjects[i][$scope.itemName]);\n                                }\n                            }\n                        } else\n                            $scope.setPlaceholderLabel($scope.placeholderText);\n                    });\n\n                    $scope.searchFilter = function (filterText) {\n                        $scope.filterText = filterText;\n                    };\n\n                    $scope.renderModal = function () {\n                        $scope.modal = $ionicModal.fromTemplate('<ion-modal-view id=\"select\">'\n                            + '<ion-header-bar class=\"' + $scope.headerClass + '\">'\n                            + '<h1 class=\"title\">' + $scope.selectTitle + '</h1>'\n                            + '<a ng-click=\"closeSelectModal()\" class=\"button button-icon icon ion-close\"></a>'\n                            + '</ion-header-bar>'\n                            + '<ion-content>'\n                            + '<ion-list>'\n                            + '<ion-item ng-if=\"showSearch == \\'yes\\'\">'\n                            + '<label class=\"item item-input\">'\n                            + '<i class=\"icon ion-search placeholder-icon\"></i>'\n                            + '<input type=\"text\" placeholder=\"Search\" ng-model=\"filterText\" ng-change=\"searchFilter(filterText)\">'\n                            + '</label>'\n                            + '</ion-item>'\n                            + '<ion-item  ng-click=\"clickItem(item);' + '\" ng-repeat=\"item in sourceObjects | filter: {' + $scope.itemName + ': filterText}\" ng-bind-html=\"item[\\'' + $scope.itemName + '\\']\"></ion-item>'\n                            + '</ion-list>'\n                            + ' </ion-content>'\n                            + '</ion-modal-view>', {\n                            scope: $scope,\n                            animation: 'slide-in-right',\n                            backdropClickToClose: false\n                        });\n                    };\n\n                    $scope.clickItem = function (item) {\n                        $scope.selectedValue = item[$scope.itemId];\n                        $scope.label = item[$scope.itemName];\n                        $scope.closeSelectModal();\n                        $scope.selectChanged({selectedValue: $scope.selectedValue});\n                    };\n\n                    $scope.setPlaceholderLabel = function (label) {\n                        $scope.label = label;\n                    };\n\n                    $scope.$on('reset', function () {\n                        $scope.setPlaceholderLabel($scope.placeholderText);\n                        $scope.selectedValue = null;\n                    });\n                }],\n                compile: function ($element, $scope) {\n                    var input = $element.find('input.selected');\n                    angular.forEach({\n                        'name': $scope.name,\n                        'ng-model': $scope.selectedValue\n                    }, function (value, name) {\n                        if (angular.isDefined(value)) {\n                            input.attr(name, value);\n                        }\n                    });\n                }\n            };\n        });\n//# sourceMappingURL=select-search.js.map\n})();\n"]}